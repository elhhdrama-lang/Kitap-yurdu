@model List<Book>
@{
    ViewData["Title"] = "Kitap Yönetimi";
}

<div class="container py-5">
    <div class="d-flex align-items-center justify-content-between mb-5">
        <div>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/Admin/Dashboard">Dashboard</a></li>
                    <li class="breadcrumb-item active">Kitaplar</li>
                </ol>
            </nav>
            <h1 class="display-font fw-bold">Katalog Yönetimi</h1>
        </div>
        <div class="d-flex gap-3">
             <input type="text" id="bookSearch" class="form-control rounded-pill px-4" placeholder="Kitap veya yazar ara...">
             @* <a href="/Book/Add" class="btn btn-dark rounded-pill px-4">Yeni Kitap Ekle</a> *@
        </div>
    </div>

    <div class="bg-white rounded-4 shadow-sm border overflow-hidden">
        <div class="table-responsive">
            <table class="table table-hover mb-0 align-middle">
                <thead class="bg-light">
                    <tr>
                        <th class="px-4 py-3">Kitap</th>
                        <th class="py-3">Kategori</th>
                        <th class="py-3">Fiyat</th>
                        <th class="py-3">Stok</th>
                        <th class="py-3">Durum</th>
                        <th class="px-4 py-3 text-end">İşlemler</th>
                    </tr>
                </thead>
                <tbody id="bookTableBody">
                    @foreach (var book in Model)
                    {
                        <tr>
                            <td class="px-4">
                                <div class="d-flex align-items-center">
                                    <img src="@(string.IsNullOrEmpty(book.ImageURL) ? "https://via.placeholder.com/40x60" : book.ImageURL)" 
                                         class="rounded-1 me-3 object-fit-cover" style="width: 40px; height: 55px;" alt="@book.Title">
                                    <div style="max-width: 300px;">
                                        <div class="fw-bold text-dark text-truncate">@book.Title</div>
                                        <small class="text-muted">@book.AuthorName</small>
                                    </div>
                                </div>
                            </td>
                            <td><span class="badge bg-light text-dark border rounded-pill fw-normal">@book.CategoryName</span></td>
                            <td class="fw-bold">@book.Price.ToString("C")</td>
                            <td>
                                <span class="fw-bold @(book.StockQuantity < 10 ? "text-danger" : "text-dark")">@book.StockQuantity</span>
                            </td>
                            <td>
                                <span class="badge @(book.StockStatus == "Stokta Var" ? "bg-success-subtle text-success" : (book.StockStatus == "Az Stokta" ? "bg-warning-subtle text-warning" : "bg-danger-subtle text-danger")) px-3">
                                    @book.StockStatus
                                </span>
                            </td>
                            <td class="px-4 text-end">
                                <div class="d-flex justify-content-end gap-2">
                                    <a href="/Book/Details/@book.BookID" class="btn btn-sm btn-outline-dark rounded-circle" title="Görüntüle"><i class="bi bi-eye"></i></a>
                                    @* <a href="/Book/Edit/@book.BookID" class="btn btn-sm btn-outline-primary rounded-circle" title="Düzenle"><i class="bi bi-pencil"></i></a> *@
                                    @* <button class="btn btn-sm btn-outline-danger rounded-circle" title="Sil"><i class="bi bi-trash"></i></button> *@
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    document.getElementById('bookSearch').addEventListener('keyup', function() {
        const query = this.value.toLowerCase();
        const rows = document.querySelectorAll('#bookTableBody tr');
        rows.forEach(row => {
            const text = row.textContent.toLowerCase();
            row.style.display = text.indexOf(query) > -1 ? '' : 'none';
        });
    });
</script>
